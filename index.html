<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童识字小报生成器</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>儿童识字小报生成器</h1>
            <p class="subtitle">为 5-9 岁儿童生成双语识字小报</p>
        </header>

        <div class="main-layout">
            <!-- 左侧配置区 -->
            <div class="left-panel">
                <!-- 历史记录 -->
                <section class="section">
                    <h2>📜 历史记录</h2>
                    <div class="history-container">
                        <div id="history-list" class="history-list"></div>
                        <button id="clear-history-btn" class="btn btn-small btn-secondary" type="button">清空历史</button>
                    </div>
                </section>

                <!-- API 配置 -->
                <section class="section">
                    <h2>🔧 API 配置</h2>
                    <div class="api-config-content">
                        <div class="api-group">
                            <h3>📷 图片生成 API</h3>
                            <div class="form-group">
                                <label>API 版本</label>
                                <div class="api-version-toggle">
                                    <label class="radio-option">
                                        <input type="radio" name="api-version" value="kie" checked>
                                        <span>NanoBanana (kie.ai) - 推荐使用</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="api-version" value="yunwu">
                                        <span>云雾 (yunwu.ai) - 备用选择</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>API Key <span class="required">*</span></label>
                                <input type="password" id="nanobanana-key" placeholder="请输入对应的 API Key">
                            </div>
                        </div>

                        <div class="api-group">
                            <h3>💬 文本生成 API（词汇生成/翻译）</h3>
                            <div class="form-group">
                                <label>接口地址 <span class="required">*</span></label>
                                <input type="text" id="text-api-url" value="https://api.siliconflow.cn/v1/chat/completions">
                                <small>支持 OpenAI 兼容格式的 API</small>
                            </div>
                            <div class="form-group">
                                <label>API Key <span class="required">*</span></label>
                                <input type="password" id="text-api-key" placeholder="请输入文本 API Key">
                            </div>
                            <div class="form-group">
                                <label>模型名称 <span class="required">*</span></label>
                                <input type="text" id="text-api-model" value="Pro/deepseek-ai/DeepSeek-V3.2">
                            </div>
                        </div>
                    </div>
                    <div class="button-group">
                        <button id="save-api-btn" class="btn btn-secondary">保存配置</button>
                        <button id="clear-api-btn" class="btn btn-secondary">清除配置</button>
                    </div>
                </section>

                <!-- 场景和词汇配置 -->
                <section class="section">
                    <h2>1️⃣ 场景配置</h2>
                    <div class="scene-selection">
                        <div class="preset-scenes">
                            <button class="scene-btn" data-scene="超市">🛒 超市</button>
                            <button class="scene-btn" data-scene="医院">🏥 医院</button>
                            <button class="scene-btn" data-scene="公园">🌳 公园</button>
                            <button class="scene-btn" data-scene="动物园">🦁 动物园</button>
                            <button class="scene-btn" data-scene="学校">🏫 学校</button>
                        </div>
                        <div class="custom-scene">
                            <input type="text" id="custom-scene-input" placeholder="或输入自定义场景">
                            <button id="confirm-custom-scene-btn" class="btn btn-small">确定</button>
                        </div>
                    </div>
                    <div id="selected-scene" class="selected-info"></div>
                </section>

                <!-- 标题输入 -->
                <section class="section">
                    <h2>2️⃣ 小报标题</h2>
                    <input type="text" id="title-input" class="title-input" placeholder='如：《我的超市之旅》'>
                </section>

                <div class="button-group">
                    <button id="generate-vocab-btn" class="btn btn-primary" disabled>生成词汇</button>
                </div>

                <!-- 词汇列表 -->
                <section id="vocab-section" class="section" style="display: none;">
                    <h2>3️⃣ 词汇列表</h2>
                    <div class="vocab-container">
                        <div class="vocab-category">
                            <h3>核心角色与设施</h3>
                            <button class="add-word-btn btn btn-small" data-category="核心">+ 添加词汇</button>
                            <div id="vocab-core" class="vocab-grid"></div>
                        </div>
                        <div class="vocab-category">
                            <h3>常见物品/工具</h3>
                            <button class="add-word-btn btn btn-small" data-category="物品">+ 添加词汇</button>
                            <div id="vocab-items" class="vocab-grid"></div>
                        </div>
                        <div class="vocab-category">
                            <h3>环境与装饰</h3>
                            <button class="add-word-btn btn btn-small" data-category="环境">+ 添加词汇</button>
                            <div id="vocab-environment" class="vocab-grid"></div>
                        </div>
                    </div>
                </section>

                <div class="button-group">
                    <button id="generate-image-btn" class="btn btn-primary" disabled>🎨 生成图片</button>
                </div>
            </div>

            <!-- 右侧结果区 -->
            <div class="right-panel">
                <section id="result-section" class="section" style="display: none;">
                    <h2>4️⃣ 生成结果</h2>
                    <div id="loading-container" class="loading-container">
                        <div class="spinner"></div>
                        <p id="loading-text">正在生成图片，请稍候...</p>
                        <p id="loading-hint">预计需要 2-5 分钟（异步任务模式）</p>
                    </div>
                    <div id="result-container" class="result-container" style="display: none;">
                        <img id="result-image" alt="生成的识字小报">
                        <div class="button-group">
                            <button id="download-btn" class="btn btn-primary">下载图片</button>
                            <button id="regenerate-btn" class="btn btn-secondary">重新生成</button>
                            <button id="new-generation-btn" class="btn btn-secondary">生成新的</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- 添加词汇模态框 -->
    <div id="add-word-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>添加新词汇</h3>
            <div class="form-group">
                <label>类别</label>
                <p id="modal-category-name"></p>
            </div>
            <div class="form-group">
                <label>输入汉字 <span class="required">*</span></label>
                <input type="text" id="modal-word-input" placeholder="如：苹果">
                <small>AI 将自动翻译成英文</small>
            </div>
            <div class="button-group">
                <button id="modal-cancel-btn" class="btn btn-secondary">取消</button>
                <button id="modal-add-btn" class="btn btn-primary">添加</button>
            </div>
            <div id="modal-loading" class="modal-loading" style="display: none;">
                <div class="spinner small"></div>
                <span>正在翻译...</span>
            </div>
        </div>
    </div>

    <!-- JavaScript 文件 -->
    <script src="js/vocabulary.js"></script>
    <script src="js/api-new.js"></script>
    <script src="js/api-yunwu.js"></script>
    <script src="js/prompt.js"></script>
    <script src="js/app.js"></script>

  </body>
</html>